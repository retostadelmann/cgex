<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Pickle Rick</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.3/TweenMax.min.js"></script>

    <script>
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(35, window.innerWidth/window.innerHeight, 0.1, 3000);
        camera.position.z = 200;
        camera.position.y = 10;
        camera.position.x = 0;

        var renderer = new THREE.WebGLRenderer({antialias: true});
        renderer.setClearColor("#e5e5e5");
        renderer.setSize(window.innerWidth, window.innerHeight);

        document.body.appendChild(renderer.domElement);

        window.addEventListener('resize', () =>{
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;

            camera.updateProjectionMatrix();
        })

        function drawPickle(scene, lenght, bend, radius)
        {
            var material = new THREE.MeshLambertMaterial({color: 0x5E8D2F});

            //Tube Geometry
            var start = new THREE.Vector3(0, 0, 0);
            var middle = new THREE.Vector3(bend, lenght/2, 0);
            var end = new THREE.Vector3(0, lenght, 0);

            var curveQuad = new THREE.QuadraticBezierCurve3(start, middle, end);

            var tube = new THREE.TubeGeometry(curveQuad, 200, radius, 200, false);
            var tubeMesh = new THREE.Mesh( tube, material );
            scene.add(tubeMesh);

            //Spheres
            bottomSphere = new THREE.SphereGeometry( radius, 200, 200);
            var botSphereMesh = new THREE.Mesh( bottomSphere, material );
            scene.add(botSphereMesh);

            topSphere = new THREE.SphereGeometry( radius, 200, 200);
            var topSphereMesh = new THREE.Mesh( topSphere, material );
            topSphereMesh.geometry.translate(0,lenght,0)
            scene.add(topSphereMesh);
        }

        drawPickle(scene, 30, 10, 5);

        var light = new THREE.DirectionalLight(0xFFFFFF, 1, 500);
        light.position.set(10, 0, 25);
        scene.add(light);

        renderer.render(scene,camera);
    </script>
</body>
</html>